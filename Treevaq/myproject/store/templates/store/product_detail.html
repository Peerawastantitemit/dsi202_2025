{% extends 'store/base.html' %}
{% load static %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-md-6">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid" style="max-height: 400px; object-fit: cover;">
            {% else %}
                <img src="{% static 'img/default.jpg' %}" alt="No Image" class="img-fluid" style="max-height: 400px; object-fit: cover;">
            {% endif %}
        </div>
        <div class="col-md-6">
            <h2>{{ product.name }} üåø</h2>
            <p>‡∏£‡∏≤‡∏Ñ‡∏≤: {{ product.price }} ‡∏ö‡∏≤‡∏ó üí∏</p>
            <p>‡∏•‡∏î CO2: {{ product.co2_reduction }} ‡∏Å‡∏Å. üåç</p>
            <p>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: {{ product.description|default:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" }}</p>
            <!-- Existing link as fallback -->
            <a href="{% url 'store:add_to_cart' product.id %}" class="btn btn-success">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ üõí</a>
            <!-- New button for dynamic cart update -->
            <button data-cart-update data-product-id="{{ product.id }}" class="btn btn-primary mt-2">Add to Cart</button>
        </div>
    </div>
    <div class="text-center mt-4">
        <a href="{% url 'store:index' %}" class="btn btn-primary">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ä‡πá‡∏≠‡∏õ‡∏ï‡πà‡∏≠ üõí</a>
    </div>
</div>
{% endblock %}